# AI Code Review Prompt Template

## üéØ Purpose
This prompt template guides AI agents in performing comprehensive peer reviews of React components generated by the MCP system, ensuring adherence to industry best practices and project conventions.

## üìã Review Checklist

### 1. React Best Practices (Weight: 25%)
- [ ] **Component Structure**: Proper functional component structure with clear separation of concerns
- [ ] **Hooks Usage**: Correct usage of React hooks (useState, useEffect, useCallback, useMemo)
- [ ] **Props Validation**: TypeScript interfaces or PropTypes for component props
- [ ] **Performance**: Optimized rendering, proper dependency arrays, memoization where appropriate
- [ ] **Error Boundaries**: Error handling for components that might fail
- [ ] **Component Composition**: Proper use of children props and component composition patterns

### 2. TypeScript Quality (Weight: 20%)
- [ ] **Strict Typing**: No usage of `any` type, proper type definitions
- [ ] **Interface Definitions**: Clear, well-documented interfaces for props and state
- [ ] **Generic Usage**: Appropriate use of generics for reusable components
- [ ] **Type Safety**: Proper type guards and null checks
- [ ] **Import/Export Types**: Correct usage of type-only imports/exports
- [ ] **Utility Types**: Leverage TypeScript utility types (Partial, Pick, Omit, etc.)

### 3. Accessibility (Weight: 20%)
- [ ] **Semantic HTML**: Use of appropriate semantic elements (button, nav, main, section, article)
- [ ] **ARIA Attributes**: Proper aria-label, aria-labelledby, aria-describedby usage
- [ ] **Keyboard Navigation**: Tab order, focus management, keyboard event handling
- [ ] **Screen Reader Support**: Meaningful text alternatives, proper heading hierarchy
- [ ] **Color Contrast**: Ensure sufficient color contrast (when applicable)
- [ ] **Focus Indicators**: Visible focus indicators for interactive elements

### 4. Code Quality (Weight: 15%)
- [ ] **Clean Code**: Clear, readable code with meaningful variable and function names
- [ ] **Naming Conventions**: Consistent naming (PascalCase for components, camelCase for variables)
- [ ] **Code Organization**: Logical structure, proper separation of concerns
- [ ] **Documentation**: JSDoc comments for complex functions and components
- [ ] **DRY Principle**: No unnecessary code duplication
- [ ] **SOLID Principles**: Single responsibility, proper abstraction levels

### 5. Performance (Weight: 10%)
- [ ] **Bundle Size**: Minimal imports, tree-shaking friendly code
- [ ] **Render Optimization**: Proper use of React.memo, useMemo, useCallback
- [ ] **Memory Management**: No memory leaks, proper cleanup in useEffect
- [ ] **Lazy Loading**: Code splitting and lazy loading where appropriate
- [ ] **Image Optimization**: Proper image handling and optimization
- [ ] **Network Requests**: Efficient API calls, proper caching strategies

### 6. Security (Weight: 10%)
- [ ] **XSS Prevention**: No dangerouslySetInnerHTML without sanitization
- [ ] **Input Validation**: Proper validation of user inputs
- [ ] **Secure Defaults**: Safe default values and configurations
- [ ] **Dependency Security**: No known vulnerable dependencies
- [ ] **Data Sanitization**: Proper sanitization of external data
- [ ] **Authentication**: Proper handling of authentication state

## üîç Review Process

### Step 1: Initial Analysis
```
Analyze the component for:
1. Overall structure and architecture
2. Adherence to React patterns
3. TypeScript implementation quality
4. Accessibility compliance
5. Performance considerations
6. Security implications
```

### Step 2: Issue Identification
```
For each issue found, provide:
- Severity Level: CRITICAL | MAJOR | MINOR | SUGGESTION
- Category: react_best_practices | typescript_quality | accessibility | code_quality | performance | security
- Title: Brief description of the issue
- Description: Detailed explanation of the problem
- Line Number: Specific location (if applicable)
- Code Snippet: Problematic code section
- Suggestion: Specific fix or improvement
- Rule Reference: Link to relevant documentation or style guide
```

### Step 3: Scoring Algorithm
```
Category Score Calculation:
- Start with 100 points
- Deduct 25 points per CRITICAL issue
- Deduct 10 points per MAJOR issue
- Deduct 5 points per MINOR issue
- No deduction for SUGGESTION level

Overall Score:
- Weighted average of all category scores
- Minimum score: 0, Maximum score: 100
```

### Step 4: Recommendations
```
Generate actionable recommendations:
1. Priority fixes (CRITICAL and MAJOR issues)
2. Improvement suggestions (MINOR issues)
3. Best practice enhancements (SUGGESTIONS)
4. Learning resources for identified gaps
```

## üìä Quality Gates

### Acceptance Criteria
- **Minimum Overall Score**: 80/100
- **No CRITICAL Issues**: Zero tolerance for critical security or functionality issues
- **Maximum MAJOR Issues**: ‚â§ 2 major issues per component
- **Accessibility Compliance**: Must pass basic WCAG 2.1 AA guidelines

### Review Outcomes
- **‚úÖ APPROVED**: Score ‚â• 80, no critical issues
- **‚ö†Ô∏è CONDITIONAL**: Score 60-79, requires minor fixes
- **‚ùå REJECTED**: Score < 60 or has critical issues

## üõ†Ô∏è Automated Fixes

### Auto-Fixable Issues
1. **Missing Imports**: Add missing React/hooks imports
2. **Basic Accessibility**: Add basic aria-labels to buttons
3. **TypeScript**: Replace `any` with `unknown` (safer default)
4. **Formatting**: Code formatting and style consistency
5. **Simple Optimizations**: Add missing dependency arrays

### Manual Review Required
1. **Complex Logic Issues**: Business logic problems
2. **Architecture Decisions**: Component structure changes
3. **Performance Bottlenecks**: Complex optimization needs
4. **Security Vulnerabilities**: Requires security expertise
5. **Accessibility Complex**: Advanced a11y requirements

## üìù Review Template

```markdown
# Code Review: [Component Name]

## üìä Summary
- **Overall Score**: X/100
- **Review Duration**: X.Xs
- **Status**: APPROVED | CONDITIONAL | REJECTED

## üîç Category Scores
- React Best Practices: X/100
- TypeScript Quality: X/100
- Accessibility: X/100
- Code Quality: X/100
- Performance: X/100
- Security: X/100

## ‚ö†Ô∏è Issues Found (X total)
### CRITICAL Issues (X)
- [Issue details...]

### MAJOR Issues (X)
- [Issue details...]

### MINOR Issues (X)
- [Issue details...]

### SUGGESTIONS (X)
- [Issue details...]

## ‚úÖ Strengths
- [Identified strengths...]

## üéØ Recommendations
1. [Priority recommendations...]
2. [Improvement suggestions...]

## üìö Learning Resources
- [Relevant documentation links...]
```

## üîÑ Integration with MCP Workflow

### Pre-Review Setup
1. Load project conventions from `.ai-docs/.ai-docs/.ai-docs/@core/@conventions.md.md.md`
2. Load component-specific requirements from blueprints
3. Initialize review criteria and scoring weights
4. Prepare automated fix patterns

### Post-Review Actions
1. Apply automated fixes where possible
2. Generate refined code if score < threshold
3. Update component documentation
4. Log review results for continuous improvement
5. Trigger additional validation if needed

## üéØ AI Assistant Instructions

When performing code reviews:

1. **ALWAYS** start by loading this prompt template
2. **ANALYZE** the code against all six categories
3. **IDENTIFY** issues with specific line numbers and suggestions
4. **CALCULATE** scores using the defined algorithm
5. **GENERATE** actionable recommendations
6. **APPLY** automated fixes where appropriate
7. **DOCUMENT** the review process and results

Remember: The goal is to ensure high-quality, maintainable, accessible React code that follows industry best practices and project conventions.
